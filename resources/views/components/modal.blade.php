<!--  Show role select for signup -->
<div class="modal fade" id="roleModal" tabindex="-1" role="dialog" aria-labelledby="roleModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"><button type="button" class="close close-without-border" data-dismiss="modal">×</button> <img class="logo-sm" src="https://static.classdojo.com/img/classdojo-logo-round-120x120.png"></div>
            <div class="modal-body container-fluid">
                <h3 class="modal-title">Sign up for ClassDojo as a...</h3>
                <div class="row">
                    <div class="col-xs-12 col-sm-3">
                        <div class="row">
                            <div class="badge-and-selector"><span><div class=""><a href="#" onclick="showSignup('Teacher');" class="block depress-on-click btn btn-signup gray-border" data-toggle="modal" data-target="#teacher-signup-modal"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon large-screen"> Teacher</span>                                <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Teacher</span></span>
                                </span>
                                </a>
                            </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon large-screen"> Teacher</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Teacher</span></span>
                            </span>
                            </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="row">
                        <div class="badge-and-selector">
                            <span>
                                <div class=""><a href="#" oncl class="block depress-on-click btn btn-signup gray-border" onclick="showSignup('Parent');"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon large-screen"> Parent</span>                            <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon small-screen">
                                    <span class="badge-label small-screen"> Parent</span>
                                </span>
                            </span>
                            </a>
                        </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon large-screen"> Parent</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Parent</span></span>
                        </span>
                        </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <div class="row">
                    <div class="badge-and-selector"><a href="javascript:void(0);" onclick="showSignup('Student');" class="block depress-on-click btn btn-signup gray-border"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/student_badge.png" class="icon large-screen"> Student</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/student_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Student</span></span></span></a></div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <div class="row">
                    <div class="badge-and-selector"><span><div class=""><a href="#" onclick="showSignup('Leader');" class="block depress-on-click btn btn-signup gray-border" data-toggle="modal" data-target="#teacher-signup-modal"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon large-screen"> School Leader</span>                        <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon small-screen"> <span class="badge-label small-screen">School Leader</span></span>
                        </span>
                        </a>
                    </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon large-screen"> School Leader</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon small-screen"> <span class="badge-label small-screen">School Leader</span></span>
                    </span>
                    </span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- .modal-body -->
</div>
<!-- .modal-content -->
</div>
<!-- .modal-dialog -->
</div>
<!-- End of role modal for signup -->

<!--  Show role select for login -->
<div class="modal fade" id="LoginRoleModal" tabindex="-1" role="dialog" aria-labelledby="LoginRoleModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"><button type="button" class="close close-without-border" data-dismiss="modal">×</button> <img class="logo-sm" src="https://static.classdojo.com/img/classdojo-logo-round-120x120.png"></div>
            <div class="modal-body container-fluid">
                <h3 class="modal-title">Login in to ClassDojo </h3>
                <div class="row">
                    <div class="col-xs-12 col-sm-3">
                        <div class="row">
                            <div class="badge-and-selector"><span><div class=""><a href="#" onclick="showLogin('Teacher');" class="block depress-on-click btn btn-signup gray-border" data-toggle="modal" data-target="#teacher-signup-modal"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon large-screen"> Teacher</span>                                <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Teacher</span></span>
                                </span>
                                </a>
                            </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon large-screen"> Teacher</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/teacher_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Teacher</span></span>
                            </span>
                            </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="row">
                        <div class="badge-and-selector">
                            <span>
                                <div class=""><a href="#" oncl class="block depress-on-click btn btn-signup gray-border" onclick="showLogin('Parent');"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon large-screen"> Parent</span>                            <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon small-screen">
                                    <span class="badge-label small-screen"> Parent</span>
                                </span>
                            </span>
                            </a>
                        </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon large-screen"> Parent</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/parent_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Parent</span></span>
                        </span>
                        </span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <div class="row">
                    <div class="badge-and-selector"><a href="javascript:void(0);" onclick="showLogin('Student');" class="block depress-on-click btn btn-signup gray-border"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/student_badge.png" class="icon large-screen"> Student</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/student_badge.png" class="icon small-screen"> <span class="badge-label small-screen">Student</span></span></span></a></div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <div class="row">
                    <div class="badge-and-selector"><span><div class=""><a href="#" onclick="showLogin('Leader');" class="block depress-on-click btn btn-signup gray-border" data-toggle="modal" data-target="#teacher-signup-modal"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon large-screen"> School Leader</span>                        <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon small-screen"> <span class="badge-label small-screen">School Leader</span></span>
                        </span>
                        </a>
                    </div><span class="obsolete-browser-only"><span class="hidden-xs text-center"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon large-screen"> School Leader</span> <span class="visible-xs text-left"><span class="badge-small-screen"><img src="https://static.classdojo.com/img/icons/school_leader_badge.png" class="icon small-screen"> <span class="badge-label small-screen">School Leader</span></span>
                    </span>
                    </span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- .modal-body -->
</div>
<!-- .modal-content -->
</div>
<!-- .modal-dialog -->
</div>
<!-- End of role modal for signup -->
<!-- start login modal -->

<!-- End of login modal -->
<div class="modal modal-component fade " id="parent-code-modal" tabindex="-1" role="dialog" aria-labelledby="parent-code-modal" aria-hidden="true" data-backdrop="static">
    <div class="row">
        <div class="col-xs-12">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header"><button type="button" class="close close-without-border" data-dismiss="modal">×</button> <img class="logo-sm" src="https://static.classdojo.com/img/classdojo-logo-round-120x120.png"></div>
                    <div class="modal-body container-fluid">
                        <h3 class="modal-title">Parents</h3>Enter your code <a class="pull-right" href="#" data-target="#code-explanation" data-toggle="modal">What is a code?</a>
                        <div class="form-group"><input id="parent-code-input" type="text" class="form-control input-lg" data-form-item-name="code" placeholder="e.g., C123456" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></div><button data-form-submit=""
                            class="btn btn-primary btn-lg btn-block btn-square full-width" type="button" id="parent-code-submit" disabled="disabled">Check code</button></div>
                    <!-- .modal-body -->
                    <div class="row dont-have-code modal-footer">
                        <h3>Don't have a code?</h3><a href="https://home.classdojo.com" class="btn btn-lg btn-login btn-wide">Log in</a> <span class="text-muted">or</span> <a href="https://home.classdojo.com/#/signup" class="btn btn-primary btn-lg btn-wide">Sign up</a></div>
                </div>
                <!-- .modal-content -->
            </div>
            <!-- .modal-dialog -->
        </div>
    </div>
</div>
<!--Signup form Modal -->
<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-labelledby="signupModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <img class="logo-sm" src="https://static.classdojo.com/img/classdojo-logo-round-120x120.png">
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-10 col-xs-offset-1">
                        <form id="signup_teacher">
                            {{ csrf_field() }}
                            <h3 class="modal-title">Get ready for your best classroom yet :)</h3>
                            <div class="alert alert-success load_msg" style="display:none"> @lang('home.modal_alert_signup')</div>
                            <div class="form-group title-group" id="title-holder">
                                <select class="form-control input-lg" id="teacher-title-select" name="title" onchange="showOtherTitle(this.value);">
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Miss.">Miss</option>
                                    <option value="Ms.">Ms.</option>
                                    <option value="Mr.">Dr.</option>
                                    <option value="Prof">Prof</option>
                                    <option value="Other">Other</option>
                                </select>
                                <span class="help-block"></span>
                            </div>
                            <!-- only one of these two will be shown -->
                            <div class="form-group title title-group" id="title-input-holder" style="display: none">
                                <input type="text" class="form-control input-lg" name="title_text"  placeholder="Title">
                                <span class="help-block"></span>
                            </div>
                            <div class="form-group first_name-group">
                                <input id="first-name" type="text" class="form-control input-lg" name="first_name" placeholder="First name">
                                <span class="help-block"></span>
                            </div>
                            <div class="form-group last_name-group">
                                <input id="last-name" type="text" class="form-control input-lg" name="last_name" placeholder="Last name">
                                <span class="help-block"></span>
                                </div>
                            <div class="form-group email-field email-group">
                                <input id="signup-email" type="email" class="form-control input-lg" name="email" placeholder="Email" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                <span class="help-block"></span>
                            </div>
                            <div class="form-group password-field password-group">
                                <input  id="signup-password" type="password" class="form-control input-lg" name="password" placeholder="Password" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                <span class="help-block"></span>
                            </div>
                            <div class="form-group password_confirmation-group">
                                <input id="password-confirm" type="password" class="form-control input-lg" name="password_confirmation" placeholder="Confirm Password">
                                <span class="help-block"></span>
                            </div>

                            <div class="form-group">
                                <input type="hidden" name="role" value="Teacher" id="role">
                                <button  type="button" id="save_class_b" class="btn btn-primary btn-block btn-lg js-signup-button t-signup-form" name="save_class_b">Sign up</button></div>
                            <!-- GENERIC SIGNUP ERROR -->
                            <div class="alert alert-danger" data-alert-name="error" style="display: none">It looks like that email has already been used.<br><a class="depress-on-click" href="#" data-toggle="modal" data-target="#forgot-password-modal">Did you mean to login?</a></div>
                            <!-- TERMS AND PRIVACY -->
                            <div id="regular-policy-and-terms" class="terms-and-privacy margin-top-40 margin-bottom-20 text-center">By signing up, you agree to our <a class="depress-on-click" target="_blank" href="/terms">Terms of Service</a> and <a class="depress-on-click" target="_blank" href="/privacy">Privacy Policy</a>.</div>
                        </form>
                        <!-- /.modal-body -->
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<!--login form Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <img class="logo-sm" src="https://static.classdojo.com/img/classdojo-logo-round-120x120.png">
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-10 col-xs-offset-1">
                        <form id="login_form">
                            {{ csrf_field() }}
                            <h3 class="modal-title">Login in to ClassDojo :)</h3>
                            <div class="alert alert-success login_load_msg" style="display:none"> @lang('home.modal_alert_signup')</div>

                            <!-- only one of these two will be shown -->

                            <div class="form-group email-field email-group">
                                <input id="signup-email" type="email" class="form-control input-lg" name="login_email" placeholder="Email" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                <span class="help-block"></span>
                            </div>
                            <div class="form-group password-field password-group">
                                <input  id="signup-password" type="password" class="form-control input-lg" name="login_password" placeholder="Password" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                <span class="help-block"></span>
                                <a href="#" class="text-muted forgot-password-button" data-toggle="modal" data-target="#forgot-password-modal" data-track="click:forgot-password-button">Forgot your password?</a>
                            </div>

                            <div class="form-group">
                                <input type="hidden" name="login_role" value="Teacher" id="login_role">
                                <button  type="button" id="save_class_b" class="btn btn-primary btn-login btn-lg btn-block btn-square full-width" name="save_class_b">Log in</button>
                            </div>
                            <!-- GENERIC SIGNUP ERROR -->

                            <div class="text-center signup-redirect"><span>Don't have an account?&nbsp;</span> <a href="#" class="text-muted" onclick="showSignup($('#login_role').val());" data-track="click:login-signup-button">Sign up</a></div>                        </form>
                        <!-- /.modal-body -->
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>




<script>
    function showRole() {
        $('.modal').modal('hide');
        $('#roleModal').modal({
            keyboard: false,
            backdrop: 'static'
        })
    }
    function showPoints() {
        $('.modal').modal('hide');
        $('#add-student-feedback-points').modal({
            keyboard: false,
            backdrop: 'static'
        })
    }

    function ShowLoginRole() {
        $('.modal').modal('hide');
        $('#LoginRoleModal').modal({
            keyboard: false,
            backdrop: 'static'
        })
    }
    function showSignup(role) {
        $('.modal').modal('hide');
        $('#signupModal').modal({
            keyboard: false,
            backdrop: 'static'
        })
        $('#role').val(role);
    }
    function showLogin(role) {
        $('.modal').modal('hide');
        $('#loginModal').modal({
            keyboard: false,
            backdrop: 'static'
        })
        $('#login_role').val(role);
    }

    function showOtherTitle(title) {
        // alert(title);
        if (title=='Other') {
            $('#title-input-holder').show();
        }else{
            $('#title-input-holder').hide();
        }
    }

    $(".js-signup-button").click(function(e){
	    	e.preventDefault();
	    	var _token = $("input[name='_token']").val();
	    	var first_name = $("input[name='first_name']").val();
	    	var last_name = $("input[name='last_name']").val();
	    	var email = $("input[name='email']").val();
	    	var password = $("input[name='password']").val();
            var password_confirmation = $("input[name='password_confirmation']").val();
            var role = $("input[name='role']").val();
            var title_select = $("#teacher-title-select").val();
            if (title_select=="Other") {
                var title = $("input[name='title_text']").val();
            }else{
                var title = $("select#teacher-title-select").val();
            }

	        $.ajax({
	            url: "{{ route('register') }}",
	            type:'POST',
	            data: {_token:_token, first_name:first_name, last_name:last_name, email:email, password:password,password_confirmation:password_confirmation,role:role,title:title},

	            success: function(data) {
	                if($.isEmptyObject(data.error)){
	                	$('.load_msg').css('display','block');
                        var form = $('#signup_teacher');
                        form.find('.form-group').removeClass('has-error').find('.help-block').text('');
                        $('.modal').hide('slow');
                        location.href = '{{ route('home') }}';
	                }else{
	                	printErrorMsg(data.error);
	                }
	            },
                error: function(data){
                 var response = data.responseJSON;
                 console.log(response);
                 var form = $('#signup_teacher');
                 form.find('.form-group').removeClass('has-error').find('.help-block').text('');
                $.each(response.errors, function(field,msg){
                    form.find('.'+field+'-group').addClass('has-error').find('.help-block').text(msg);
                });
               }
	        });

	    });
        $(".btn-login").click(function(e){
    	    	e.preventDefault();
    	    	var _token = $("input[name='_token']").val();
    	    	var email = $("input[name='login_email']").val();
    	    	var password = $("input[name='login_password']").val();
                var role = $("input[name='login_role']").val();
    	        $.ajax({
    	            url: "{{ route('login') }}",
    	            type:'POST',
    	            data: {_token:_token, email:email, password:password,role:role},

    	            success: function(data) {
    	                if($.isEmptyObject(data.error)){
    	                	$('.login_load_msg').css('display','block');
                            var form = $('#login_form');
                            form.find('.form-group').removeClass('has-error').find('.help-block').text('');
                            $('.modal').hide('slow');
                            location.href = '{{ route('home') }}';
    	                }else{
    	                	printErrorMsg(data.error);
    	                }
    	            },
                    error: function(data){
                     var response = data.responseJSON;
                     var form = $('#login_form');
                     form.find('.form-group').removeClass('has-error').find('.help-block').text('');
                    $.each(response.errors, function(field,msg){
                        form.find('.'+field+'-group').addClass('has-error').find('.help-block').text(msg);
                    });
                   }
    	        });

    	    });

// points update

</script>
